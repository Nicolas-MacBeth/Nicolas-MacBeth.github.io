<!DOCTYPE html>
<html>
<body>

<h1>Rich Paste Format Generator</h1>
<h2>This button will copy the following notes and links in rich and plain formats to the clipboard</h2>
  
<div id=notes>
Here are some notes I wanted to share:<br><br>
<i>"It emerged in Quebec, Canada, in the late 1950s in the Centre-du-Qu√©bec region"</i><br>
- Drummundville FTW!<br>
<br>
<i>"leading some to suggest that poutine has emerged as a new dish classification in its own right"</i><br>
- Damn right!<br>
<br>
<a href="https://en.wikipedia.org/wiki/Poutine#:~:text=It%20emerged%20in%20Quebec%2C%20Canada%2C%20in%20the%20late%201950s%20in%20the%20Centre-du-Qu%C3%A9bec%20region">https://en.wikipedia.org/wiki/Poutine</a>
<br>
</div>

<button type="button"
onclick="copyToClipboard()">
Copy to clipboard</button>

<h2>Try pasting it here (plain format):</h2>
<textarea></textarea>
  
</body>
</html> 

<script>
function convertToPlain(rtf) {
    rtf = rtf.replace(/\\par[d]?/g, "");
    return rtf.replace(/\{\*?\\[^{}]+}|[{}]|\\\n?[A-Za-z]+\n?(?:-?\d+)?[ ]?/g, "").trim();
}
  
function copyToClipboard() {
  var notes = document.getElementById('notes').innerHTML;
  function listener(e) {
    e.clipboardData.setData("text/html", notes);
    e.clipboardData.setData("text/plain", convertToPlain(notes));
    e.preventDefault();
  }
  document.addEventListener("copy", listener);
  document.execCommand("copy");
  document.removeEventListener("copy", listener);
};
</script>
